(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{310:function(e,l,t){},317:function(e,l,t){"use strict";t(310)},322:function(e,l,t){"use strict";t.r(l);t(11);var o={data:function(){return{file:null,progress:0,uploadedPath:this.cover,isloading:!1}},watch:{file:function(e,l){if(e&&l){for(var t=["lastModified","name","size","type "],o=0,n=0,r=t;n<r.length;n++){var c=r[n];if(e[c]!=l[c])break;o++}if(o==t.length)return}e&&this.upload(e)},cover:function(e,l){this.uploadedPath=e}},props:["url","uploadDir","cover"],methods:{upload:function(e){var l=this;this.isloading=!0,this.progress=0,new Promise((function(t,o){var n={onUploadProgress:l._uploadProgressCallback,resolve:t,reject:o};l.tokenSource=l.$local.api.uploadFile(l.$axios,e,l.uploadDir,n)})).then((function(e){l.uploadedPath=e.data,l.$emit("uploaded",e.data)})).catch((function(e){return l.$local.handleClientApiException(l,e)})).finally((function(){l.tokenSource=null,l.isloading=!1}))}}},n=(t(317),t(24)),component=Object(n.a)(o,(function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{staticClass:"uploader"},[t("div",{staticClass:"uploader-show"},[e.uploadedPath?t("img",{staticClass:"cover-preview-show",attrs:{src:e.$local.api.serverHost+"assets/image/?localpath="+e.uploadedPath,alt:"cover-preview-show"}}):e._e(),e._v(" "),t("div",{staticClass:"tip"},[t("span",{staticClass:"tip-upload"},[t("b-field",{staticClass:"file is-primary"},[t("b-upload",{staticClass:"file-label",attrs:{accept:"image/jpeg, image/jpg, image/png"},model:{value:e.file,callback:function(l){e.file=l},expression:"file"}},[t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-label"},[e._v(e._s(e.$t("common.uploadCover")))])])])],1)],1)])]),e._v(" "),t("b-loading",{attrs:{"is-full-page":!1},model:{value:e.isloading,callback:function(l){e.isloading=l},expression:"isloading"}})],1)}),[],!1,null,"7aa65355",null);l.default=component.exports}}]);
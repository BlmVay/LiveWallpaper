(window.webpackJsonp=window.webpackJsonp||[]).push([[1,6,7,8,9,13,14],{310:function(e,t,n){},311:function(e,t,n){},314:function(e,t,n){"use strict";n.r(t);var o=n(1),l=(n(31),n(11),{data:function(){return{isBusy:!1,enableCustomUrl:!1,downloadUrl:this.defaultUrl,stoping:!1,innerShow:this.show}},props:["show","defaultUrl","progress","completed","successed"],watch:{innerShow:function(e,t){this.$emit("update:show",e)},show:function(e,t){this.innerShow=e},defaultUrl:function(e,t){console.log(e,t),e&&!this.downloadUrl&&(this.downloadUrl=e)}},computed:{downloading:function(){return this.progress>0||this.progress<100}},methods:{start:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isBusy){t.next=2;break}return t.abrupt("return");case 2:return e.isBusy=!0,n=new Promise((function(t){return e.$emit("start",e.downloadUrl,t)})),t.next=6,n;case 6:t.sent,e.isBusy=!1;case 8:case"end":return t.stop()}}),t)})))()},stop:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stoping=!0,n=new Promise((function(t){return e.$emit("stop",t)})),t.next=4,n;case 4:e.stoping=!1;case 5:case"end":return t.stop()}}),t)})))()}}}),r=n(24),component=Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{model:{value:e.innerShow,callback:function(t){e.innerShow=t},expression:"innerShow"}},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[e._t("header")],2),e._v(" "),n("b-switch",{attrs:{disabled:e.isBusy},model:{value:e.enableCustomUrl,callback:function(t){e.enableCustomUrl=t},expression:"enableCustomUrl"}},[e._v(e._s(e.$t("local.customUrlTip")))])],1),e._v(" "),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[e.enableCustomUrl?n("div",{staticClass:"columns subtitle"},[n("div",{staticClass:"column is-11"},[n("b-input",{attrs:{disabled:e.isBusy,placeholder:e.$t("local.customUrlPlaceholder"),"icon-pack":"fas","icon-right":"undo","icon-right-clickable":""},on:{"icon-right-click":function(t){e.downloadUrl=e.defaultUrl}},model:{value:e.downloadUrl,callback:function(t){e.downloadUrl=t},expression:"downloadUrl"}})],1),e._v(" "),n("div",{staticClass:"column"},[e._t("help")],2),e._v(" "),n("div",{staticClass:"column"})]):e._e(),e._v(" "),n("b-progress",{attrs:{value:e.progress,"show-value":"",type:e.completed?"is-success":"is-info"}},[e._t("text")],2)],1)]),e._v(" "),n("footer",{staticClass:"card-footer"},[n("div",{staticClass:"card-footer-item"}),e._v(" "),n("div",{staticClass:"card-footer-item"}),e._v(" "),e.successed?n("b-button",{staticClass:"card-footer-item",attrs:{type:"is-success"},on:{click:function(t){e.innerShow=!1}}},[e._v(e._s(e.$t("common.close")))]):e.isBusy?e.isBusy||e.downloading?n("b-button",{staticClass:"card-footer-item",attrs:{loading:e.stoping,disabled:e.stoping,type:"is-danger"},on:{click:e.stop}},[e._v(e._s(e.$t("common.stop"))+"\n      ")]):e._e():n("b-button",{staticClass:"card-footer-item",attrs:{type:"is-info"},on:{click:e.start}},[e._v("\n        "+e._s(e.$t("common.start"))+"\n      ")])],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Header:n(158).default,Footer:n(94).default})},315:function(e,t,n){"use strict";n.r(t);var o=n(1),l=(n(11),n(31),{data:function(){return{show:!1,progress:0,completed:!1,successed:!1,type:void 0}},methods:{showModal:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.show=!0,!e.$refs.innerModal.isBusy){t.next=3;break}return t.abrupt("return");case 3:e.$refs.innerModal.start();case 4:case"end":return t.stop()}}),t)})))()},startCallback:function(e,t){var n=this,o=!1;this.$local.api.setupFFmpeg(e,function(e){this.progress=e.percent,this.completed="completed"===e.typeStr,this.type=e.typeStr,this.completed&&(this.successed=e.successed)}.bind(this)).then((function(e){console.log(e),o=e})).catch((function(e){return n.$local.handleClientApiException(n,e)})).finally((function(){t(o)}))},stopCallback:function(e){var t=this;this.$local.api.stopSetupFFmpeg().catch((function(e){return t.$local.handleClientApiException(t,e)})).finally(e)}}}),r=n(24),component=Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseProgressModal",{ref:"innerModal",attrs:{show:e.show,progress:e.progress,completed:e.completed,successed:e.successed,defaultUrl:"http://localhost:5001/ffmpeg.7z"},on:{"update:show":function(t){e.show=t},start:e.startCallback,stop:e.stopCallback},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.$t("common.installFFmpeg"))+" ")]},proxy:!0},{key:"help",fn:function(){return[n("a",{staticClass:"button",attrs:{href:"https://github.com/giant-app/LiveWallpaper",target:"_blank"}},[n("b-icon",{attrs:{pack:"fa",icon:"question-circle"}})],1)]},proxy:!0},{key:"text",fn:function(){return["download"===e.type?[e._v("\n      "+e._s(e.$t("local.downloading",{progress:e.progress}))+"\n    ")]:"decompress"===e.type?[e._v(e._s(e.$t("local.unzipping",{progress:e.progress}))+"\n    ")]:e.completed&&e.successed?[e._v(e._s(e.$t("local.downloadComplete"))+"\n    ")]:[e._v(e._s(e.$t("local.waitStart")))]]},proxy:!0}])})}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{BaseProgressModal:n(314).default})},317:function(e,t,n){"use strict";n(310)},318:function(e,t,n){"use strict";n(311)},322:function(e,t,n){"use strict";n.r(t);n(11);var o={data:function(){return{file:null,progress:0,uploadedPath:this.cover,isloading:!1}},watch:{file:function(e,t){if(e&&t){for(var n=["lastModified","name","size","type "],o=0,l=0,r=n;l<r.length;l++){var c=r[l];if(e[c]!=t[c])break;o++}if(o==n.length)return}e&&this.upload(e)},cover:function(e,t){this.uploadedPath=e}},props:["url","uploadDir","cover"],methods:{upload:function(e){var t=this;this.isloading=!0,this.progress=0,new Promise((function(n,o){var l={onUploadProgress:t._uploadProgressCallback,resolve:n,reject:o};t.tokenSource=t.$local.api.uploadFile(t.$axios,e,t.uploadDir,l)})).then((function(e){t.uploadedPath=e.data,t.$emit("uploaded",e.data)})).catch((function(e){return t.$local.handleClientApiException(t,e)})).finally((function(){t.tokenSource=null,t.isloading=!1}))}}},l=(n(317),n(24)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"uploader"},[n("div",{staticClass:"uploader-show"},[e.uploadedPath?n("img",{staticClass:"cover-preview-show",attrs:{src:e.$local.api.serverHost+"assets/image/?localpath="+e.uploadedPath,alt:"cover-preview-show"}}):e._e(),e._v(" "),n("div",{staticClass:"tip"},[n("span",{staticClass:"tip-upload"},[n("b-field",{staticClass:"file is-primary"},[n("b-upload",{staticClass:"file-label",attrs:{accept:"image/jpeg, image/jpg, image/png"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}},[n("span",{staticClass:"file-cta"},[n("span",{staticClass:"file-label"},[e._v(e._s(e.$t("common.uploadCover")))])])])],1)],1)])]),e._v(" "),n("b-loading",{attrs:{"is-full-page":!1},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}})],1)}),[],!1,null,"7aa65355",null);t.default=component.exports},323:function(e,t,n){"use strict";n.r(t);n(11);var o={data:function(){return{selectedItem:null,isloading:!1,coverUrls:[],noFFMPEG:!1,errorMessage:void 0}},props:["videoPath"],watch:{videoPath:function(e,t){this.loadCovers()}},mounted:function(){this.loadCovers()},methods:{regenerate:function(){this.loadCovers()},loadCovers:function(){var e=this;!this.isloading&&this.videoPath&&(this.isloading=!0,this.$local.api.getThumbnails(this.videoPath).then((function(t){t.ok?(e.coverUrls=t.data,e.selectedItem=e.coverUrls[0],e.$emit("loadCompeted",e.coverUrls)):"NoFFmpeg"===t.errorString?e.noFFMPEG=!0:e.errorMessage=t.message})).catch((function(t){return e.$local.handleClientApiException(e,t)})).finally((function(){e.isloading=!1})))},clickItem:function(e,t){this.selectedItem=e,this.$emit("selected",e)},showSetupModal:function(){this.$refs.setupModal.showModal()}}},l=(n(318),n(24)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"selector"},[n("div",{staticClass:"selector-deg"}),e._v(" "),e.isloading?e._e():n("div",{staticClass:"selector-items"},[e.coverUrls.length>0?e._l(e.coverUrls,(function(t,o){return n("div",{key:t,staticClass:"selector-item",class:{"selector-item-selected":e.selectedItem===t},style:{"background-image":"url("+e.$local.api.serverHost+"assets/image/?localpath="+t+")"},on:{click:function(n){return e.clickItem(t,o)}}},[e._v("\n        "+e._s(o)+"\n        "),e.selectedItem===t?n("img",{staticClass:"select_ai_img",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAwCAYAAAB9sggoAAAAAXNSR0IArs4c6QAAA19JREFUWAnNmM1rE0EUwN9s0tiWBi0oxIIfKNV4kCpi1YMe1Eu95dKD6D8giODVgxXtzYOi1Yseqg1CQL1qD4IeRYQKponSCO2xYoUUmq/d9b1dN9lkN5ud2dkkD5adnZ1977fvvX07Mwx6IZm1IahunQRNPQI6HAbQ8WB7sB0HhgfocdY1rnR+EjRtCjT9PBo/jRAxL9vhgr1a3g9VdgU9cBV0/ZAXSOu9cMDmfx4HVruFXkkhlNJq1M+1XLD0j2Og1mYR6JIf415j5IBlVrZDqXIXDV3DkEW8DPq9FxxsIZsCFZ6gwYRfo37GiYNl9BiUcvfRQ9f9GOIdIwaWLuyDWvk1JvYJXoN+x/ODLSwfxdC9Q6gxv0ZExvF9yi/zZ0HVP4UNRS8S9f02BKVr73H8kO9nAgz0F0ojfOQp2BHAFtejnUNJiW7kVPeg6A28wagkmF9fqInu5kpvMKpTIZYENyCrr32OmRX9jTWw22d3MPr3bZVzCCP1N8Pzcu6hNH/IPYOiF3B6zJi6qF9kzRJ4vGQf6yyw5nxKytTFboi33ewxmnlC9SuvkjDGN+cYTYe7JDeSo7A+PQ6F1EG4kBh2WG14zFg4QAFzq9HnGC6nY2ZiJ9ye2FVX9qtYgQNvV+rX1Gh4jFYzPYAiiPhAA4OuSWw9uMQKWVo9ZZm79+231ayfTTBajHKu++oafDbaQd1ZWoeHuQ2HFhOMVsghihfUzJLTW4TyHwyX7SGJCBShMKANjlLxb6e9BBFuUSiypUBpE/PLe4PDDeri7mGjBlEtoprUKkGgSFcUfZZEMG55fmYM9o4MGM89mEzA6LYIWPkSFIqURhEK96b4JRZprsP2gmlvW5rp67PArT6vM/7EadOMX2ax9jw61TwzcgMizbxQ9Ax+lbiTJyCP8xuGwU6PikCRTgVDiVuLYkKhIcPtRBSK9CmY/MJgpKAdXBAoEww3YqkRRAhuLvcHVE03DmrzJLqbbQYvsmWROuamTGYfJX9RpkJZuij5+w+MwSYlf/+BAaxiKPU1We6Xp0dZpBzLy1MoQxPTIBp5RqHsLzAGT+Hy+HdKftqj6A9h7AMMJm8SjAKDI5/Ra5XekmH4GJtDqCmYZgaLOXeZz35EsHNdhcOSgPZW0TeLlFMUPrv9f7vzJ3SudQKgAAAAAElFTkSuQmCC",alt:"select_ai_img"}}):e._e()])})):e.noFFMPEG?n("b-message",{attrs:{type:"is-warning"}},[n("div",{staticClass:"columns is-vcentered"},[e._v("\n        "+e._s(e.$t("common.needFFmpeg"))+"\n        "),n("b-button",{attrs:{type:"is-text"},on:{click:e.showSetupModal}},[e._v("\n          "+e._s(e.$t("common.clickToInstall"))+"\n        ")]),e._v(" "),n("b-button",{attrs:{type:"is-text"},on:{click:e.regenerate}},[e._v("\n          "+e._s(e.$t("common.regenerate"))+"\n        ")])],1)]):e.errorMessage?n("div",[n("b-message",{attrs:{type:"is-danger"}},[e._v("\n        "+e._s(e.errorMessage)+"\n      ")])],1):e._e()],2),e._v(" "),n("b-loading",{attrs:{"is-full-page":!1},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[n("b-icon",{attrs:{pack:"fas",icon:"sync-alt",size:"is-large","custom-class":"fa-spin"}}),e._v(e._s(e.$t("common.generatingCover"))+"\n  ")],1),e._v(" "),n("SetupFFmpegModal",{ref:"setupModal"})],1)}),[],!1,null,"1e27dbf1",null);t.default=component.exports;installComponents(component,{SetupFFmpegModal:n(315).default})},328:function(e,t,n){},331:function(e,t,n){"use strict";n.r(t);var o=n(1),l=(n(31),n(11),{data:function(){return{innerFile:this.file,innerProgress:0,fileUploadedPath:void 0,tokenSource:void 0,fileType:null}},props:["file","url","deleteTitle","deleteMessage","deleteConfirmText","deleteCancelText","uploadDir"],watch:{file:function(e,t){e&&!this.innerFile&&(this.innerFile={name:e,fake:!0},this.innerProgress=100)},innerFile:function(e,t){if(!e||!e.fake){if(e&&t){for(var n=["lastModified","name","size","type "],o=0,l=0,r=n;l<r.length;l++){var c=r[l];if(e[c]!=t[c])break;o++}if(o==n.length)return}e&&this.upload(e)}}},methods:{_uploadProgressCallback:function(e){this.innerProgress=Math.round(100*e.loaded/e.total),console.log(this.innerProgress,e.loaded,e.total)},upload:function(e){var t=this;this.innerProgress=0,this.fileType=e.type,console.log("fileType",this.fileType),new Promise((function(n,o){var l={onUploadProgress:t._uploadProgressCallback,resolve:n,reject:o};t.tokenSource=t.$local.api.uploadFile(t.$axios,e,t.uploadDir,l)})).then((function(e){t.$emit("uploaded",e)})).catch((function(e){return t.$local.handleClientApiException(t,e)})).finally((function(){t.tokenSource=null}))},stopUpload:function(){var e,t=this;this.$buefy.dialog.confirm({title:this.deleteTitle,message:this.deleteMessage,confirmText:this.deleteConfirmText,cancelText:this.deleteCancelText,type:"is-danger",hasIcon:!0,onConfirm:(e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.tokenSource&&t.tokenSource.cancel("Operation canceled by the user."),t.innerProgress=0,t.$emit("cancelled"),t.innerFile=null;case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),onCancel:function(){}})},cleanFile:function(){this.innerFile=null}}}),r=l,c=n(24),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-field",[n("b-field",{staticClass:"file is-primary",class:{"has-name":!!e.innerFile}},[n("b-upload",{staticClass:"file-label",attrs:{"drag-drop":"",disabled:!!e.innerFile,accept:"image/*,video/*"},model:{value:e.innerFile,callback:function(t){e.innerFile=t},expression:"innerFile"}},[n("span",{staticClass:"file-cta"},[n("b-icon",{staticClass:"file-icon",attrs:{pack:"fas",icon:"upload"}}),e._v(" "),n("span",{staticClass:"file-label"},[e._v(e._s(e.$t("dashboard.client.editor.uploadTips")))])],1)])],1),e._v(" "),e.innerFile?n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-11"},[n("b-progress",{attrs:{type:"is-info",value:e.innerProgress,"show-value":""}},[e._v("\n        "+e._s(e.innerFile.name)+"\n      ")])],1),e._v(" "),n("div",{staticClass:"column"},[n("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:e.stopUpload}})])]):e._e()],1)}),[],!1,null,null,null);t.default=component.exports},332:function(e,t,n){"use strict";n.r(t);var o={data:function(){return{file:null,progress:0,innerCoverPath:this.coverPath,tokenSource:void 0,coverUrls:[],isGettingThumbnails:!1}},props:["uploadDir","showSelector","coverPath","videoPath"],watch:{coverPath:function(e,t){this.innerCoverPath=e}},methods:{selectorSelected:function(path){this.innerCoverPath=path,this.$emit("selected",path)},selectorLoadCompeted:function(e){this.innerCoverPath||(this.innerCoverPath=e[0],this.$emit("selected",e[0]))},uploadedCallback:function(e){this.$emit("uploaded",e)}}},l=n(24),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-field",[n("div",{staticClass:"columns",staticStyle:{"min-height":"135px"},attrs:{"is-vcentered":"","is-centered":""}},[n("div",{staticClass:"column is-one-fifth"},[n("CoverUploader",{attrs:{cover:e.innerCoverPath,uploadDir:e.uploadDir},on:{uploaded:e.uploadedCallback}})],1),e._v(" "),n("div",{staticClass:"column"},[e.showSelector?n("CoverSelector",{ref:"selector",attrs:{videoPath:e.videoPath},on:{selected:e.selectorSelected,loadCompeted:e.selectorLoadCompeted}}):e._e()],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CoverUploader:n(322).default,CoverSelector:n(323).default})},336:function(e,t,n){"use strict";n(328)},338:function(e,t,n){"use strict";n.r(t);var o=n(1),l=(n(31),n(15),n(34),n(49),n(11),{components:{},data:function(){return{sourceData:void 0,filePath:void 0,coverPath:null,fileType:void 0,title:void 0,description:void 0,isLoading:!1,tags:[],wallpaperDir:void 0}},props:{wallpapersRouterName:{type:String,default:"index"}},computed:{isEditing:function(){var e=this.sourceData;return e?this.filePath!=e.filePath||this.fileType!=e.fileType||this.title!=e.title||this.description!=e.description||this.coverPath!=e.coverPath||this.$refs.uploader.uploading:this.filePath||this.fileType||this.title||this.description||this.coverPath},canSave:function(){return this.filePath&&this.title&&("image"===this.fileType||this.coverPath)}},beforeMount:function(){var e=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",e.preventNav)}))},watch:{coverPath:function(e,t){console.log(this.filePath),t&&this.filePath&&this.$local.api.deleteFiles([t])}},methods:{preventNav:function(e){this.isEditing&&(e.preventDefault(),e.returnValue="")},setUIData:function(e){var t,n,o,l,r=e?e.info:{},c=e?e.runningData:null;this.filePath=null,this.coverPath=null,c&&(this.filePath=e.runningData.absolutePath,this.coverPath="".concat(e.runningData.dir,"\\").concat(r.preview)),this.fileType=null!==(t=r.type)&&void 0!==t?t:null,this.title=null!==(n=r.title)&&void 0!==n?n:null,this.description=null!==(o=r.description)&&void 0!==o?o:null,this.tags=null!==(l=r.tags)&&void 0!==l?l:[],this.$refs.uploader&&this.$refs.uploader.cleanFile()},onSaveLocalClick:function(){var e=this;this.isLoading=!0,this.coverPath||"image"!==this.fileType||(this.coverPath=this.filePath);var t={title:this.title,description:this.description,file:this.$local.substrLastIndexOf(this.filePath,"\\"),preview:this.$local.substrLastIndexOf(this.coverPath,"\\"),type:this.fileType,tags:this.tags};console.log("savelocal",t),this.$local.api.updateProjectInfo(this.wallpaperDir,t).then((function(t){e.$buefy.dialog.confirm({canCancel:["button"],message:e.$t("common.createSuccess"),type:"is-success",cancelText:e.$t("common.ok"),confirmText:e.$t("common.viewNow"),onConfirm:function(){e.sourceData=null,e.setUIData(),e.$router.push(e.localePath({name:e.wallpapersRouterName}))},onCancel:function(){e.sourceData=null,e.initPage()}})})).catch((function(t){return e.$local.handleClientApiException(e,t)})).finally(this.hideLoading)},hideLoading:function(){this.isLoading=!1},onUploaderCancelled:function(){var e=this;this.filePath&&(this.isLoading=!0,this.$local.api.deleteFiles([this.filePath,this.coverPath]).then((function(t){e.filePath=null,e.coverPath=null,e.fileType=null,e.$buefy.toast.open({message:e.$t("dashboard.client.editor.uploadCancelled"),queue:!1})})).catch((function(t){return e.$local.handleClientApiException(e,t)})).finally(this.hideLoading))},onuploaded:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$buefy.toast.open({message:t.$t("common.uploaded"),type:"is-success",queue:!1}),t.fileType=t.$local.substrToLastIndex(t.$refs.uploader.fileType,"/"),console.log(t.fileType),t.filePath=e.data,t.title||(t.title=t.$local.substrLastIndexOf(t.filePath,"\\"));case 5:case"end":return n.stop()}}),n)})))()},onCoverUploaded:function(e){this.coverPath=e},onSelectorSelected:function(path){var e=this;if(path){this.isLoading=!0;var t="".concat(this.wallpaperDir,"\\preview.png");this.$local.api.moveFile(path,t,!1).then((function(){e.coverPath=t})).catch((function(t){return e.$local.handleClientApiException(e,t)})).finally(this.hideLoading)}},initPage:function(path){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=null,e.isLoading=!0,!path){t.next=9;break}return t.next=6,e.$local.api.getWallpaper(path);case 6:o=t.sent,(n=o.data)||alert("Wallpaper doesn't exist");case 9:if(e.setUIData(n),!n){t.next=15;break}e.wallpaperDir=n.runningData.dir,e.sourceData={filePath:e.filePath,fileType:e.fileType,title:e.title,description:e.description,coverPath:e.coverPath},t.next=20;break;case 15:return t.next=17,e.$local.api.getDraftDir();case 17:l=t.sent,console.log("draftDir",l.data),e.wallpaperDir=l.data;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),e.$local.handleClientApiException(e,t.t0);case 25:return t.prev=25,e.hideLoading(),t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[0,22,25,28]])})))()},beforeRouteLeave:function(e,t,n){this.isEditing&&!window.confirm(this.$t("dashboard.client.editor.leaveTips"))||n()}},created:function(){},fetch:function(){this.initPage(this.$route.params.id)},fetchOnServer:!1}),r=(n(336),n(24)),component=Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container main"},[n("section",[n("b-field",{attrs:{label:e.$t("common.wallpaper")}},[n("Uploader",{ref:"uploader",attrs:{file:e.filePath,uploadDir:e.wallpaperDir,deleteTitle:this.$t("local.deletingWallpaper"),deleteMessage:this.$t("local.deletingWallpaperConfirmMessage",{delete:e.$t("common.delete").toLowerCase(),name:this.title}),deleteConfirmText:e.$t("common.delete"),deleteCancelText:e.$t("common.cancel")},on:{cancelled:e.onUploaderCancelled,uploaded:e.onuploaded}})],1),e._v(" "),e.fileType&&"image"!=e.fileType?n("b-field",{attrs:{label:e.$t("common.cover")}},[n("Cover",{attrs:{coverPath:e.coverPath,videoPath:e.filePath,uploadDir:e.wallpaperDir,showSelector:e.fileType&&"video"===e.fileType},on:{uploaded:e.onCoverUploaded,selected:e.onSelectorSelected}})],1):e._e(),e._v(" "),n("b-field",{attrs:{label:e.$t("dashboard.client.editor.title")}},[n("b-input",{attrs:{placeholder:e.$t("dashboard.client.editor.titlePlaceholder")},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e._v(" "),n("b-field",{attrs:{label:e.$t("dashboard.client.editor.description")}},[n("b-input",{attrs:{placeholder:e.$t("dashboard.client.editor.descriptionPlaceholder"),maxlength:"200",type:"textarea"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),n("b-field",{attrs:{label:e.$t("dashboard.client.editor.tag")}},[n("b-taginput",{attrs:{autocomplete:"","allow-new":!0,maxlength:20,maxtags:10,"open-on-focus":!1,field:"user.first_name","icon-pack":"fas",icon:"tags",placeholder:e.$t("dashboard.client.editor.tagPlaceholder")},model:{value:e.tags,callback:function(t){e.tags=t},expression:"tags"}})],1),e._v(" "),n("hr"),e._v(" "),n("b-field",[n("section",{staticClass:"b-tooltips"},[n("button",{staticClass:"button is-primary",attrs:{disabled:!e.canSave},on:{click:e.onSaveLocalClick}},[e._v("\n          "+e._s(e.$t("common.save"))+"\n        ")])])])],1),e._v(" "),n("client-only",[n("b-loading",{attrs:{closable:!1},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}})],1)],1)}),[],!1,null,"ced9443a",null);t.default=component.exports;installComponents(component,{Uploader:n(331).default,Cover:n(332).default})}}]);